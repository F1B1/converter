!function(){"use strict";var e={success:"success",selects:document.querySelectorAll(".select"),amountInput:document.getElementById("amount"),form:document.querySelector(".form"),resultFrom:document.getElementById("resultFrom"),resultTo:document.getElementById("resultTo"),formResults:document.querySelector(".form-results"),rateConvertion:document.querySelector(".rate-conversion"),ratelast:document.querySelector(".rate-last"),switchButton:document.querySelector(".switch-currencies"),toSelect:document.getElementById("to"),fromSelect:document.getElementById("from"),tabs:document.querySelectorAll(".tab"),currentCurrency:document.querySelector(".currency-single__item"),currentCurrencyList:document.querySelector(".currency-list"),singleSelect:document.getElementById("singleSelect"),addButton:document.querySelector(".currency-add__button"),addCurrencySelect:document.getElementById("addCurrencySelect")},t={url:"https://v6.exchangerate-api.com/v6/1afbbf665cac368b96b480c8",codes:[],pair:{from:"",to:""},amount:"",loading:!1,currentTab:"convert",currency:{code:"USD"},currencies:["USD","EUR","BYN"],actions:{remove:"remove",change:"change"}};const c=(e,t)=>{const[,c]=e.find((e=>e.includes(t)));return c},n=(e,t)=>new Intl.NumberFormat("en-US",{style:"currency",currency:e,maximumFractionDigits:2}).format(t),r=({code:e,amount:t,full:c})=>`\n    <div class="form-result__item-icon icon">\n        <img src="img/converter/arrow.svg" alt="">\n    </div>\n    <div class="form-result__item-titles">\n        <div class="form-result__item-tilte">${e}</div>\n        <div class="form-result__item-full">${c}</div>\n    </div>\n    <div class="form-result__item-value">${t.toFixed(2)}</div>\n`,o=({code:e,base_code:n,rate:r=1})=>{const o=e===n,i=(e=>{const{actions:{remove:c,change:n}}=t,r=e?n:c;return`\n    <button class="currency-${r} currency-button" data-action = ${r}> ${r} </button>`})(o);return`<div class="currency-item ${o?"currency-current":""}" data-item="${e}">\n    <div class="currency-titles">\n        <div class="currency-title">${e}</div>\n        <div class="currency-full">${c(t.codes,e)}</div>\n    </div>\n    <div class="currency-amount">${r.toFixed(2)}</div>\n    <div class="currency-action"> ${i} </div>\n</div>`},{success:i,rateConvertion:a,resultFrom:s,resultTo:l,ratelast:u,toSelect:d,fromSelect:m}=e,y=({target:{value:e,name:c}})=>{t.pair={...t.pair,[c]:e}},h=({target:{value:e,name:c}})=>{t[c]=Number(e)},v=async e=>{e?.preventDefault();const{url:o,amount:d,pair:{from:m,to:y}}=t;t.loading=!0;try{const e=await fetch(`${o}/pair/${m}/${y}/${d}`),h=await e.json();h.result===i&&(({base_code:e,target_code:o,conversion_rate:i,conversion_result:d,time_last_update_utc:m})=>{const y={code:e,amount:t.amount,full:c(t.codes,e)},h={code:o,amount:d,full:c(t.codes,o)};s.innerHTML=r(y),l.innerHTML=r(h);const v=n(e,1),f=n(o,i);var g;a.innerText=`${v} = ${f}`,u.innerText=`Last updated ${g=m,new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric"}).format(new Date(g))}`,document.querySelector(".form-results").classList.add("show")})(h),t.loading=!1}catch(e){console.log(e)}},f=()=>{const{pair:{to:e,from:c}}=t;t.pair={to:c,from:e},d.value=c,m.value=e},{success:g,currentCurrency:p,currentCurrencyList:L}=e,_=e=>{L.insertAdjacentHTML("afterbegin",o(e))},E=async()=>{const{url:e,currency:{code:c}}=t;try{const n=await fetch(`${e}/latest/${c}`),r=await n.json();r.result===g&&(t.currency={...t.currency,...r},(()=>{const{currency:e,currencies:c}=t,{conversion_rates:n,base_code:r}=e;p.innerHTML=o(e),L.innerHTML="",Object.entries(n).forEach((([t,n])=>{t!==r&&c.includes(t)&&_({...e,code:t,rate:n})}))})())}catch(e){console.log(e)}},S=({target:e})=>{const{action:c}=e.dataset,{actions:{remove:n}}=t;c===n?(e=>{const t=e.parentElement.parentElement,{item:c}=t.dataset;document.querySelector(`[data-item="${c}"]`).remove()})(e):p.parentElement.classList.add("active")},b=({target:e})=>{e.parentElement.classList.remove("active"),t.currency={...t.currency,code:e.value},E(),e.value=""},M=({currentTarget:e})=>{e.parentElement.classList.add("active")},q=({target:e})=>{const{currency:{conversion_rates:c,base_code:n}}=t,r=Object.entries(c).find((([t])=>t===e.value&&t!==n));if(r){const[e,c]=r;_({...t.currency,code:e,rate:c})}e.parentElement.classList.remove("active"),e.value=""},{selects:w,success:x,tabs:$,formSelect:C}=e,T=({currentTarget:e})=>{const{tab:c}=e.dataset,n=document.querySelectorAll(".content");$.forEach((e=>{e.classList.remove("active")})),e.classList.add("active");for(const e of n)e.dataset.child===c?e.classList.add("show"):e.classList.remove("show");t.currentTab=c},{amountInput:B,form:I,switchButton:k,tabs:Y,currentCurrency:A,currentCurrencyList:D,singleSelect:F,addButton:V,addCurrencySelect:X}=e;var j=function(){(async()=>{try{const e=await fetch(`${t.url}/codes`),c=await e.json();if(c.result===x)t.codes=c.supported_codes,w.forEach((e=>{t.codes.forEach((([t])=>{const c=document.createElement("option");c.value=t,c.innerText=t,e.insertAdjacentElement("beforeend",c)})),e.getAttribute("name")&&e.addEventListener("change",y)})),E();else{let t=document.createElement("div");t.innerText=`\n                Error: ${e.status} (Too many Requests)\n                your request limit - 1500\n            `,document.querySelector(".form").appendChild(t)}}catch(e){console.log(e)}})(),B.addEventListener("keyup",h),I.addEventListener("submit",v),k.addEventListener("click",f),Y.forEach((e=>{e.addEventListener("click",T)})),A.addEventListener("click",S),D.addEventListener("click",S),F.addEventListener("change",b),V.addEventListener("click",M),X.addEventListener("change",q)};window.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector(".icon-menu"),t=document.querySelector(".header__list");e.addEventListener("click",(function(c){e.classList.toggle("active"),t.classList.toggle("active"),document.body.classList.toggle("hidden")})),document.querySelector(".header__item-button").addEventListener("click",(function(e){document.querySelector(".header__sub-list").classList.toggle("active"),document.querySelector(".header__item-button").classList.toggle("active")})),j(),function(){if(innerWidth>1200){let e=document.createElement("canvas"),t=e.getContext("2d"),c=e.width=innerWidth,n=e.height=innerHeight,r=[],o={bgColor:"rgba(5, 6, 3, 1)",particleColor:"rgba(255, 189, 0, .8)",particleRadius:3,patricleCount:80,particleMaxVelocity:.2,lineLength:150,particleLife:6};document.querySelector(".start").appendChild(e),window.onresize=function(){c=e.width=innerWidth,n=e.height=innerHeight};class i{constructor(){this.x=Math.random()*c,this.y=Math.random()*n,this.velocityX=Math.random()*(2*o.particleMaxVelocity)-o.particleMaxVelocity,this.velocityY=Math.random()*(2*o.particleMaxVelocity)-o.particleMaxVelocity,this.life=Math.random()*o.particleLife*60}position(){this.x+this.velocityX>c&&this.velocityX>0||this.x+this.velocityX<0&&this.velocityX<0?this.velocityX*=-1:this.velocityX,this.y+this.velocityY>n&&this.velocityY>0||this.y+this.velocityY<0&&this.velocityY<0?this.velocityY*=-1:this.velocityY,this.x+=this.velocityX,this.y+=this.velocityY}reDraw(){t.beginPath(),t.arc(this.x,this.y,o.particleRadius,0,2*Math.PI),t.closePath(),t.fillStyle=o.particleColor,t.fill()}reCalculateLife(){this.life--,this.life<1?(this.x=Math.random()*c,this.y=Math.random()*n,this.velocityX=Math.random()*(2*o.particleMaxVelocity)-o.particleMaxVelocity,this.velocityY=Math.random()*(2*o.particleMaxVelocity)-o.particleMaxVelocity,this.life=Math.random*o.particleLife*60):this.life--}}function a(){let e,c,n,i,a,s;for(let l in r)for(let u in r)e=r[l].x,c=r[l].y,n=r[u].x,i=r[u].y,a=Math.sqrt(Math.pow(n-e,2)+Math.pow(i-c,2)),a<o.lineLength&&(s=1-a/o.lineLength,t.lineWidth="0.5",t.strokeStyle="rgba(255, 189, 0,"+s+" )",t.beginPath(),t.moveTo(e,c),t.lineTo(n,i),t.closePath(),t.stroke())}function s(){for(let e in r)r[e].reCalculateLife(),r[e].position(),r[e].reDraw()}function l(){t.fillStyle=o.bgColor,t.fillRect(0,0,c,n),s(),a(),requestAnimationFrame(l)}function u(){for(let e=0;e<o.patricleCount;e++)r.push(new i);l()}u()}}(),function(){const e=document.querySelectorAll(".transaction__content"),t=document.querySelectorAll(".transaction__item"),c=document.querySelector(".transaction__list");function n(c=0){e[c].classList.remove("hide"),t[c].classList.add("active")}function r(){e.forEach((e=>{e.classList.add("hide")})),t.forEach((e=>{e.classList.remove("active")}))}r(),n(),c.addEventListener("click",(function(e){const c=e.target;c&&c.classList.contains("transaction__item")&&t.forEach(((e,t)=>{c==e&&(r(),n(t))}))}))}()}))}();